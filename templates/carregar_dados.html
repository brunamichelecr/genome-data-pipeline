{# templates/carregar_dados.html #}
{% extends "base.html" %}

{% block title %}Carregar Dados — DemoMind{% endblock %}
{% block body_class %}upload-page{% endblock %}

{% block content %}
<section class="upload-section py-5 text-center">
  <div class="container">
    <h2 class="mb-4">Envie seu arquivo genético</h2>
    <p class="mb-4 text-muted fs-5">
      Faça o upload do seu arquivo CSV para iniciar a análise personalizada.
    </p>

    {# 1) Se não estiver logado, mostra botão para login #}
    {% if not session.get('user_id') %}
      <a href="{{ url_for('login') }}" class="btn btn-primary">
        Faça login para enviar o arquivo
      </a>

    {# 2) Usuário logado e ainda não enviou: exibe formulário #}
    {% elif not already %}
      <form action="{{ url_for('carregar_dados') }}"
            method="post"
            enctype="multipart/form-data"
            class="upload-form">
        <div class="mb-3">
          <input type="file"
                 name="file"
                 accept=".csv"
                 class="form-control"
                 required>
        </div>
        <button type="submit" class="btn btn-primary">
          Analisar meu DNA agora
        </button>
      </form>

    {# 3) Usuário logado e já enviou: mensagem de confirmação #}
    {% else %}
      <div class="alert alert-info">
        Arquivo já enviado.
      </div>
    {% endif %}

    <p class="mt-3 text-muted small">
      Seus dados estão protegidos.
    </p>
  </div>
</section>
{% endblock %}